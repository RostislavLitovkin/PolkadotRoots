<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             
             xmlns:card="clr-namespace:PlutoFramework.Components.Card;assembly=PlutoFramework"
             xmlns:networkselect="clr-namespace:PlutoFramework.Components.NetworkSelect;assembly=PlutoFramework"
             xmlns:nft="clr-namespace:PlutoFramework.Components.Nft;assembly=PlutoFramework"
             x:Class="PolkadotRoots.Components.Dotbacks.DotbackItemView"
             x:Name="self"
            HeightRequest="70">
    <card:ClickableCard CardPadding="0, 0, 0, 0"
                    x:Name="card">
        <card:ClickableCard.View>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="70" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="120" />
                </Grid.ColumnDefinitions>

                <Grid.GestureRecognizers>
                    <TapGestureRecognizer Command="{Binding Source={x:Reference self}, Path=Command}"
                                          CommandParameter="{Binding Source={x:Reference self}, Path=CommandParameter}"/>
                </Grid.GestureRecognizers>

                <Border Margin="5"
                 Padding="0"
                 HeightRequest="60"
                 Grid.Column="0"
                 StrokeThickness="0"
                 BackgroundColor="Black">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="20" />

                    </Border.StrokeShape>

                    <AbsoluteLayout>

                        <Image Aspect="AspectFill"
                            Source="{Binding Source={x:Reference self}, Path=ImageSource}"
                           HeightRequest="60"
                           WidthRequest="60"
                            AbsoluteLayout.LayoutBounds="0.5, 0.5, 1, 1" AbsoluteLayout.LayoutFlags="All"
                           />
                    </AbsoluteLayout>
                </Border>

                <AbsoluteLayout HeightRequest="60"
                         Grid.Column="1"
                            Grid.ColumnSpan="1">
                    <Label Margin="5, 2.5, 5, 5"
                               AbsoluteLayout.LayoutBounds="0.5, 0, 1, 30"
                               AbsoluteLayout.LayoutFlags="PositionProportional,WidthProportional"
                        FontSize="16"
                        VerticalTextAlignment="Center"
                           LineBreakMode="TailTruncation"
                        Grid.Column="1">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span FontAttributes="Bold"
                                          Text="{Binding Source={x:Reference self}, Path=Title}" />

                            </FormattedString>
                        </Label.FormattedText>

                    </Label>

                    <Grid AbsoluteLayout.LayoutBounds=".5, 1, 1, 30"
                      AbsoluteLayout.LayoutFlags="PositionProportional, WidthProportional"
                      BackgroundColor="{AppThemeBinding Light=White, Dark=Black}"
                      Margin="5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />

                        </Grid.ColumnDefinitions>

                        <Label
                        HorizontalTextAlignment="Start"
                        VerticalTextAlignment="Center">

                            <Label.FormattedText>
                                <FormattedString>
                                    <Span FontAttributes="Bold" 
                                          x:Name="dotPriceLabelText"/>

                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                    </Grid>
                </AbsoluteLayout>
                <AbsoluteLayout HeightRequest="60"
                             Grid.Column="2">
                    <Label
                       HorizontalTextAlignment="End"
                       VerticalTextAlignment="Center"
                       AbsoluteLayout.LayoutBounds="0,0,110,30">
                        <Label.FormattedText>
                            <FormattedString>
                                <Span FontAttributes="Bold"
                                      x:Name="operationLabelText"/>
                            </FormattedString>
                        </Label.FormattedText>
                    </Label>
                    <Label x:Name="usdLabel"
                       HorizontalTextAlignment="End"
                       VerticalTextAlignment="Center"
                       TextColor="#888888"
                       FontAttributes="Bold"
                       AbsoluteLayout.LayoutBounds="0,30,110,30"/>
                </AbsoluteLayout>
            </Grid>

        </card:ClickableCard.View>
    </card:ClickableCard>
</ContentView>
